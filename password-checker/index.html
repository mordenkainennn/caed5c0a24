<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>å¯†ç å¼ºåº¦æ£€æµ‹å™¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg: #f9f9f9;
      --text: #333;
      --bar-bg: #ddd;
      --footer: #888;
    }

    body.dark {
      --bg: #1e1e1e;
      --text: #eee;
      --bar-bg: #444;
      --footer: #aaa;
    }

    body {
      font-family: Arial, sans-serif;
      max-width: 500px;
      margin: 3em auto;
      padding: 1em;
      background: var(--bg);
      color: var(--text);
      transition: background 0.3s, color 0.3s;
    }

    h1 {
      text-align: center;
    }

    label {
      display: block;
      margin-top: 1em;
    }

    input[type="password"],
    input[type="text"] {
      width: 100%;
      padding: 0.8em;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-top: 0.5em;
      background: white;
      color: var(--text);
    }

    .strength-bar {
      height: 10px;
      margin-top: 0.5em;
      background: var(--bar-bg);
      border-radius: 4px;
      overflow: hidden;
    }

    .strength-fill {
      height: 100%;
      width: 5%;
      transition: width 0.3s;
    }

    .info {
      margin-top: 0.8em;
      font-size: 14px;
    }

    .suggestion {
      margin-top: 0.4em;
      color: #666;
      font-size: 13px;
    }

    .buttons {
      margin-top: 1em;
      display: flex;
      gap: 1em;
      align-items: center;
      flex-wrap: wrap;
    }

    button {
      padding: 0.4em 1em;
      border: none;
      background: #3498db;
      color: white;
      border-radius: 6px;
      cursor: pointer;
    }

    button:hover {
      opacity: 0.9;
    }

    .privacy {
      margin-top: 2em;
      text-align: center;
      color: var(--footer);
      font-size: 13px;
    }

    footer {
      margin-top: 1em;
      text-align: center;
      font-size: 13px;
      color: var(--footer);
    }

    .mode-toggle {
      position: absolute;
      top: 1em;
      right: 1em;
      font-size: 14px;
      background: transparent;
      color: var(--text);
      border: 1px solid var(--bar-bg);
      border-radius: 20px;
      padding: 0.4em 0.8em;
      cursor: pointer;
      transition: background 0.3s;
    }

    .mode-toggle:hover {
      background: rgba(0,0,0,0.05);
    }
  </style>
</head>
<body>
  <button class="mode-toggle" onclick="toggleDarkMode()">ğŸŒ™ æš—é»‘æ¨¡å¼</button>

  <h1>å¯†ç å¼ºåº¦æ£€æµ‹å™¨</h1>

  <label for="password">è¯·è¾“å…¥å¯†ç ï¼š</label>
  <input type="password" id="password" oninput="checkStrength()">

  <div class="strength-bar">
    <div class="strength-fill" id="strengthFill"></div>
  </div>

  <div class="info" id="strengthText"></div>
  <div class="suggestion" id="suggestion"></div>

  <div class="buttons">
    <label><input type="checkbox" onchange="toggleVisibility()"> æ˜¾ç¤ºå¯†ç </label>
    <button onclick="clearPassword()">æ¸…ç©º</button>
  </div>

  <p class="privacy">æœ¬å·¥å…·åœ¨æœ¬åœ°è¿è¡Œï¼Œæ‰€æœ‰å¯†ç ä»…åœ¨æ‚¨çš„æµè§ˆå™¨ä¸­å¤„ç†ï¼Œç»ä¸ä¸Šä¼ æˆ–å­˜å‚¨ã€‚</p>
  <footer>
    å¯†ç å¼ºåº¦æ£€æµ‹å™¨ V1.4 ï½œ Â© 2025 ä½ çš„åå­—æˆ–ç½‘ç«™å
  </footer>

  <script>
    function checkStrength() {
      const pwd = document.getElementById("password").value;
      const fill = document.getElementById("strengthFill");
      const text = document.getElementById("strengthText");
      const suggestion = document.getElementById("suggestion");

      if (pwd.length === 0) {
        fill.style.width = "5%";
        fill.style.background = "var(--bar-bg)";
        text.textContent = "";
        suggestion.textContent = "";
        return;
      }

      let score = 0;
      const suggestions = [];

      if (pwd.length >= 8) score++;
      else suggestions.push("å»ºè®®å¯†ç è‡³å°‘ 8 ä½");

      if (/[a-z]/.test(pwd)) score++;
      else suggestions.push("å»ºè®®åŠ å…¥å°å†™å­—æ¯");

      if (/[A-Z]/.test(pwd)) score++;
      else suggestions.push("å»ºè®®åŠ å…¥å¤§å†™å­—æ¯");

      if (/\d/.test(pwd)) score++;
      else suggestions.push("å»ºè®®åŠ å…¥æ•°å­—");

      if (/[\W_]/.test(pwd)) score++;
      else suggestions.push("å»ºè®®åŠ å…¥ç‰¹æ®Šç¬¦å·ï¼ˆå¦‚ !@#ï¼‰");

      if (pwd.length >= 12) score++;

      const lowerPwd = pwd.toLowerCase();
      const commonSeqs = ['1234', 'abcd', 'qwerty', 'asdf', 'zxcv', '1111', '0000'];
      const weakPasswords = [
        'password', '123456', '12345678', 'abc123', 'iloveyou',
        'admin', 'administrator', 'anonymous'
      ];

      if (new Set(pwd).size <= 2 && pwd.length >= 6) {
        score = Math.min(score, 1);
        suggestions.push("å¯†ç å­—ç¬¦è¿‡äºå•ä¸€ï¼Œå®¹æ˜“è¢«çŒœæµ‹");
      }

      if (commonSeqs.some(seq => lowerPwd.includes(seq))) {
        score = Math.min(score, 1);
        suggestions.push("é¿å…ä½¿ç”¨å¸¸è§é¡ºåºç»„åˆå¦‚ '1234' æˆ– 'abcd'");
      }

      if (weakPasswords.includes(lowerPwd)) {
        score = 0;
        suggestions.push("è¯¥å¯†ç å·²å¹¿æ³›ä½¿ç”¨ï¼Œè¯·æ›´æ¢");
      }

      const levels = ["æå¼±", "å¼±", "ä¸­ç­‰", "å¼º", "å¾ˆå¼º", "æå¼º", "å˜æ€"];
      const colors = ["#d9534f", "#f0ad4e", "#ffd500", "#5bc0de", "#5cb85c", "#2e8b57", "#008000"];
      const percent = score === 0 ? 5 : (score / 6) * 100;

      fill.style.width = percent + "%";
      fill.style.background = colors[score] || "#ccc";
      text.textContent = `å¼ºåº¦ï¼š${levels[score] || "â€”"}`;
      suggestion.innerHTML = (score <= 3 && suggestions.length)
        ? "å»ºè®®ï¼š" + suggestions.join("ï¼Œ")
        : "";
    }

    function toggleVisibility() {
      const input = document.getElementById("password");
      input.type = input.type === "password" ? "text" : "password";
    }

    function clearPassword() {
      document.getElementById("password").value = "";
      checkStrength();
    }

    function toggleDarkMode() {
      document.body.classList.toggle("dark");
    }

    checkStrength(); // åˆå§‹åŒ–
  </script>
</body>
</html>
